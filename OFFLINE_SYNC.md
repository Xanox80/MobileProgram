# –û—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—é —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é

## ‚úÖ –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

### 1. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–∑'—î–¥–Ω–∞–Ω–Ω—è**
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `@react-native-community/netinfo` –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Å—Ç–∞–Ω—É —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–ª–∏ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç –∑'—è–≤–ª—è—î—Ç—å—Å—è –∞–±–æ –∑–Ω–∏–∫–∞—î

### 2. **–ß–µ—Ä–≥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó (SQLite)**
   - –°—Ç–≤–æ—Ä–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü—è `sync_queue` –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö
   - –ó–±–µ—Ä—ñ–≥–∞—î –∞–¥—Ä–µ—Å–∏ –¥–æ—Å—Ç–∞–≤–æ–∫, —è–∫—ñ –Ω–µ –≤–¥–∞–ª–æ—Å—è –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
   - –í—ñ–¥—Å—Ç–µ–∂—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± —Ç–∞ –ø–æ–º–∏–ª–∫–∏

### 3. **–°–µ—Ä–≤—ñ—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó (`syncService.ts`)**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –ø–æ—è–≤—ñ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
   - –†—É—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
   - –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ñ —Å–ø—Ä–æ–±–∏ (–¥–æ 5 —Å–ø—Ä–æ–±)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ (—Å—Ç–∞—Ä—ñ—à—ñ –∑–∞ 7 –¥–Ω—ñ–≤)

### 4. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ API —Å–µ—Ä–≤—ñ—Å**
   - `sendDeliveryToApi` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—î –≤ —á–µ—Ä–≥—É –ø—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
   - –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ —Ç–∞–∫–æ–∂ –∑–±–µ—Ä—ñ–≥–∞—î –≤ —á–µ—Ä–≥—É –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ—ó —Å–ø—Ä–æ–±–∏

### 5. **UI —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä**
   - –í –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è —Å—Ç–∞–Ω –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (–û–Ω–ª–∞–π–Ω/–û—Ñ–ª–∞–π–Ω)
   - –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ—á—ñ–∫—É—é—á–∏—Ö —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
   - –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ä—É—á–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó

## üîÑ –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –ù–µ–º–∞—î —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤—Ü—ñ
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–∑–Ω–∞—á–∞—î –¥–æ—Å—Ç–∞–≤–∫—É —è–∫ "delivered"
2. –°–∏—Å—Ç–µ–º–∞ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∞–¥—Ä–µ—Å—É –Ω–∞ API
3. –Ø–∫—â–æ –Ω–µ–º–∞—î —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É ‚Üí –∞–¥—Ä–µ—Å–∞ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ `sync_queue`
4. –î–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ SQLite –ª–æ–∫–∞–ª—å–Ω–æ

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç –∑'—è–≤–ª—è—î—Ç—å—Å—è
1. `syncService` –≤–∏—è–≤–ª—è—î –ø–æ—è–≤—É —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –≤—Å—ñ—Ö –æ—á—ñ–∫—É—é—á–∏—Ö –∑–∞–ø–∏—Å—ñ–≤
3. –ö–æ–∂–µ–Ω –∑–∞–ø–∏—Å –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –Ω–∞ API
4. –£—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω—ñ –∑–∞–ø–∏—Å–∏ –ø–æ–∑–Ω–∞—á–∞—é—Ç—å—Å—è —è–∫ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ

### –°—Ü–µ–Ω–∞—Ä—ñ–π 3: –ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
1. –Ø–∫—â–æ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –Ω–µ –≤–¥–∞–ª–∞—Å—è (–ø–æ–º–∏–ª–∫–∞ –º–µ—Ä–µ–∂—ñ, —Ç–∞–π–º–∞—É—Ç)
2. –ó–∞–ø–∏—Å –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ —á–µ—Ä–≥—É
3. –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ–π —Å–ø—Ä–æ–±—ñ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è —Å–ø—Ä–æ–±–∞
4. –ü—ñ—Å–ª—è 5 –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–± –∑–∞–ø–∏—Å –ø–æ–∑–Ω–∞—á–∞—î—Ç—å—Å—è —è–∫ –Ω–µ–≤–¥–∞–ª–∏–π

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:

```sql
CREATE TABLE sync_queue (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  address TEXT NOT NULL,
  deliveryId TEXT,
  createdAt INTEGER NOT NULL,
  retryCount INTEGER DEFAULT 0,
  lastError TEXT,
  synced INTEGER DEFAULT 0  -- 0 = –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ, 1 = —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ
);
```

## üõ†Ô∏è API:

### `syncService.addToQueue(address, deliveryId?)`
–î–æ–¥–∞—Ç–∏ –∞–¥—Ä–µ—Å—É –≤ —á–µ—Ä–≥—É —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó

### `syncService.syncPendingItems()`
–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –≤—Å—ñ –æ—á—ñ–∫—É—é—á—ñ –∑–∞–ø–∏—Å–∏

### `syncService.isConnected()`
–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ —î —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç

### `syncService.getQueueStats()`
–û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–µ—Ä–≥–∏ (pending, total)

### `syncService.subscribe(listener)`
–ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É

## üì± –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è:
- –ü—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø–æ—è–≤—ñ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –ù–µ –ø–æ—Ç—Ä–µ–±—É—î –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –¥—ñ–π –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### –†—É—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è:
1. –í—ñ–¥–∫—Ä–∏—Ç–∏ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
2. –ó–Ω–∞–π—Ç–∏ —Å–µ–∫—Ü—ñ—é "–°–ò–ù–•–†–û–ù–Ü–ó–ê–¶–Ü–Ø"
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑–∞—Ä–∞–∑"

## üîç –õ–æ–≥—É–≤–∞–Ω–Ω—è:

–°–µ—Ä–≤—ñ—Å –ª–æ–≥—É—î –≤—Å—ñ –≤–∞–∂–ª–∏–≤—ñ –ø–æ–¥—ñ—ó:
- `üì¥ No internet, saving to sync queue` - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ —á–µ—Ä–≥—É
- `üîÑ Syncing N pending items...` - –ø–æ—á–∞—Ç–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
- `‚úÖ Synced item N` - —É—Å–ø—ñ—à–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è
- `‚ö†Ô∏è Failed to sync item N` - –ø–æ–º–∏–ª–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
- `üåê Network state changed: ONLINE/OFFLINE` - –∑–º—ñ–Ω–∞ —Å—Ç–∞–Ω—É —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–±**: 5
- **–¢–∞–π–º–∞—É—Ç –∑–∞–ø–∏—Ç—É**: 10 —Å–µ–∫—É–Ω–¥
- **–û—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –∑–∞–ø–∏—Å—ñ–≤**: —Å—Ç–∞—Ä—ñ—à—ñ –∑–∞ 7 –¥–Ω—ñ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è**: –ø—Ä–∏ –ø–æ—è–≤—ñ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É

## üêõ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:

- –ü–æ–º–∏–ª–∫–∏ –º–µ—Ä–µ–∂—ñ –Ω–µ –±–ª–æ–∫—É—é—Ç —Ä–æ–±–æ—Ç—É –¥–æ–¥–∞—Ç–∫—É
- –î–∞–Ω—ñ –∑–∞–≤–∂–¥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- –ü–æ–≤—Ç–æ—Ä–Ω—ñ —Å–ø—Ä–æ–±–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- –ü—ñ—Å–ª—è 5 –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–± –∑–∞–ø–∏—Å –ø–æ–∑–Ω–∞—á–∞—î—Ç—å—Å—è —è–∫ –Ω–µ–≤–¥–∞–ª–∏–π (–Ω–µ –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è)


