# ‚úÖ SQLite - –Ñ–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö

## üîÑ –ü–æ–≤–Ω–∞ –ø–µ—Ä–µ—Ä–æ–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

**–í–°–Ü –î–ê–ù–Ü –¢–ï–ü–ï–† –ó–ë–ï–†–Ü–ì–ê–Æ–¢–¨–°–Ø –¢–Ü–õ–¨–ö–ò –í SQLite!**

### –©–æ –∑–º—ñ–Ω–µ–Ω–æ:

1. ‚úÖ **–í–∏–¥–∞–ª–µ–Ω–æ redux-persist –∑ AsyncStorage**
   - Redux Persist –±—ñ–ª—å—à–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
   - –î–∞–Ω—ñ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ AsyncStorage —á–µ—Ä–µ–∑ Redux

2. ‚úÖ **SQLite - —î–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ –ø—Ä–∞–≤–¥–∏**
   - –í—Å—ñ –¥–æ—Å—Ç–∞–≤–∫–∏ ‚Üí SQLite (—Ç–∞–±–ª–∏—Ü—è `deliveries`)
   - –í—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Üí SQLite (—Ç–∞–±–ª–∏—Ü—è `settings`)
   - –¢–µ–º–∞ ‚Üí SQLite (—Ç–∞–±–ª–∏—Ü—è `settings`, –∫–ª—é—á `app_theme`)
   - –Ü—Å—Ç–æ—Ä—ñ—è ‚Üí SQLite (—Ç–∞–±–ª–∏—Ü—è `delivery_history`)
   - –ß–µ—Ä–≥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó ‚Üí SQLite (—Ç–∞–±–ª–∏—Ü—è `sync_queue`)

3. ‚úÖ **Redux –ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ –¥–ª—è UI**
   - Redux –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω–æ–º UI
   - –ü—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ –¥–æ–¥–∞—Ç–∫—É –¥–∞–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑ SQLite –≤ Redux
   - –í—Å—ñ –∑–º—ñ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ SQLite

4. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è**
   - –ö–æ–ª–∏ –∑–º—ñ–Ω—é—î—Ç—å—Å—è Redux state ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ SQLite
   - Thunks –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å –≤ SQLite
   - Reducers —Ç–∞–∫–æ–∂ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å –≤ SQLite (–¥–ª—è –±–µ–∑–ø–µ–∫–∏)

## üìä –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   React UI  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Redux     ‚îÇ  ‚Üê –¢—ñ–ª—å–∫–∏ –¥–ª—è UI state
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   SQLite    ‚îÇ  ‚Üê –Ñ–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö!
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     API     ‚îÇ  ‚Üê –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ sync_queue
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîÑ –ü–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö:

### –ü—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ –¥–æ–¥–∞—Ç–∫—É:
1. `App.tsx` ‚Üí `initDatabase()` ‚Üí —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è SQLite
2. `App.tsx` ‚Üí `dispatch(fetchDeliveries())` ‚Üí –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ SQLite
3. `App.tsx` ‚Üí `dispatch(fetchSettings())` ‚Üí –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ SQLite
4. `App.tsx` ‚Üí `dispatch(fetchTheme())` ‚Üí –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ SQLite
5. Redux state –æ–Ω–æ–≤–ª–µ–Ω–æ ‚Üí UI –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –¥–∞–Ω—ñ

### –ü—Ä–∏ –∑–º—ñ–Ω—ñ –¥–∞–Ω–∏—Ö:
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–∫–æ–Ω—É—î –¥—ñ—é ‚Üí Redux action/thunk
2. Thunk ‚Üí `storageService` ‚Üí SQLite (–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è)
3. Redux state –æ–Ω–æ–≤–ª–µ–Ω–æ ‚Üí UI –æ–Ω–æ–≤–ª–µ–Ω–æ
4. –Ø–∫—â–æ —Å—Ç–∞—Ç—É—Å "delivered" ‚Üí `sendDeliveryToApi()` ‚Üí API –∞–±–æ `sync_queue`

### –ü—Ä–∏ –ø–æ—è–≤—ñ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É:
1. `syncService` –≤–∏—è–≤–ª—è—î –∑–º—ñ–Ω—É
2. `syncPendingItems()` ‚Üí –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑ `sync_queue` –Ω–∞ API
3. –£—Å–ø—ñ—à–Ω—ñ –∑–∞–ø–∏—Å–∏ ‚Üí `markAsSynced(1)`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:

### `deliveries` - –≤—Å—ñ –¥–æ—Å—Ç–∞–≤–∫–∏
```sql
CREATE TABLE deliveries (
  id TEXT PRIMARY KEY,
  trackingNumber TEXT NOT NULL,
  status TEXT NOT NULL,
  createdAt INTEGER NOT NULL,
  updatedAt INTEGER NOT NULL,
  estimatedDelivery INTEGER,
  currentLocation TEXT,
  recipient TEXT,
  address TEXT,
  rating INTEGER,
  review TEXT
);
```

### `delivery_history` - —ñ—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω
```sql
CREATE TABLE delivery_history (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  deliveryId TEXT NOT NULL,
  status TEXT NOT NULL,
  timestamp INTEGER NOT NULL,
  message TEXT NOT NULL,
  location TEXT,
  FOREIGN KEY (deliveryId) REFERENCES deliveries(id) ON DELETE CASCADE
);
```

### `settings` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
```sql
CREATE TABLE settings (
  key TEXT PRIMARY KEY,
  value TEXT NOT NULL
);
```

### `sync_queue` - —á–µ—Ä–≥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
```sql
CREATE TABLE sync_queue (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  address TEXT NOT NULL,
  deliveryId TEXT,
  createdAt INTEGER NOT NULL,
  retryCount INTEGER DEFAULT 0,
  lastError TEXT,
  synced INTEGER DEFAULT 0
);
```

## ‚úÖ –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–æ–≤–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏:

1. **–û–¥–∏–Ω –¥–∂–µ—Ä–µ–ª–æ –ø—Ä–∞–≤–¥–∏** - SQLite
2. **–ù–µ–º–∞—î –¥—É–±–ª—é–≤–∞–Ω–Ω—è** - –¥–∞–Ω—ñ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ AsyncStorage
3. **–®–≤–∏–¥—à–∏–π –¥–æ—Å—Ç—É–ø** - SQLite —à–≤–∏–¥—à–∏–π –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
4. **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å** - —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó, —ñ–Ω–¥–µ–∫—Å–∏, –∑–≤'—è–∑–∫–∏
5. **–û—Ñ–ª–∞–π–Ω-–ø–µ—Ä—à–∞** - –≤—Å–µ –ø—Ä–∞—Ü—é—î –±–µ–∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
6. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è** - –¥–∞–Ω—ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è –Ω–∞ API –∫–æ–ª–∏ –∑'—è–≤–ª—è—î—Ç—å—Å—è —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:

–©–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è —â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î:
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ SQLite
2. –ó–º—ñ–Ω—ñ—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ SQLite
3. –ó–º—ñ–Ω—ñ—Ç—å —Ç–µ–º—É ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ SQLite
4. –í–∏–º–∫–Ω—ñ—Ç—å —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç ‚Üí –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
5. –£–≤—ñ–º–∫–Ω—ñ—Ç—å —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç ‚Üí –¥–∞–Ω—ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è –Ω–∞ API

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:

- **–ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ AsyncStorage** –¥–ª—è –¥–∞–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫—É
- **–í–°–Ü –æ–ø–µ—Ä–∞—Ü—ñ—ó** –ø–æ–≤–∏–Ω–Ω—ñ –π—Ç–∏ —á–µ—Ä–µ–∑ `storageService`, `settingsService`, –∞–±–æ –ø—Ä—è–º—ñ SQLite queries
- **Redux** - —Ç—ñ–ª—å–∫–∏ –¥–ª—è UI state, –Ω–µ –¥–ª—è –ø–æ—Å—Ç—ñ–π–Ω–æ–≥–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
- **SQLite** - —î–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö

